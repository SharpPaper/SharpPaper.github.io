webpackJsonp([1],{"09yM":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("kV13"),i=n("TcQY"),a=n.n(i),o=(n("09yM"),n("3cXf")),r=n.n(o),l={name:"App",data:function(){return{showDrawer:!1,settings:{msg:"",isHttps:!0}}},methods:{goBack:function(){this.$router.go(-1)},showSettings:function(){this.showDrawer=!0},closeSettings:function(){this.showDrawer=!1},pageChange:function(t){"news-item"===t&&(this.msg="热点详情")},setSettings:function(){var t=this.settings;console.log(t),localStorage.setItem("settings",r()(t))},getSettings:function(){var t=localStorage.getItem("settings");return t?JSON.parse(t):{msg:"实时热点",isHttps:!0}},Save:function(){this.setSettings(),this.settings=this.getSettings(),this.getBaseUrl(),this.closeSettings(),this.reload()},getBaseUrl:function(){var t=this.$ajax.defaults.baseURL,e=this.settings.isHttps?"https":"http",n=t.indexOf(":");t=e+t.slice(n),console.log(t),this.$ajax.defaults.baseURL=t},reload:function(){this.$nextTick(function(){location.reload()})}},created:function(){this.settings=this.getSettings(),this.getBaseUrl(),console.log(this.$ajax.defaults)},computed:{isBack:function(){return["/"].indexOf(this.$route.path)<0}},watch:{$route:function(t,e){"NewsList"===t.name&&(this.msg="实时热点")},"settings.isHttps":function(t){console.log(t)}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-container",{staticStyle:{heigth:"100%",direction:"vertical"}},[n("el-header",{attrs:{height:"45px"}},[n("div",{staticClass:"header"},[n("div",{staticClass:"menu"},[t.isBack?n("i",{staticClass:"el-icon-back head-icon",on:{click:t.goBack}}):n("i",{staticClass:"el-icon-setting head-icon",on:{click:t.showSettings}})]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.settings.msg))])])]),t._v(" "),n("el-main",{staticStyle:{width:"100%"}},[n("keep-alive",[this.$route.meta&&this.$route.meta.keepAlive?n("router-view",{staticStyle:{width:"100%"},on:{"change-page":t.pageChange}}):t._e()],1),t._v(" "),this.$route.meta&&this.$route.meta.keepAlive?t._e():n("router-view",{staticStyle:{width:"100%"},on:{"change-page":t.pageChange}})],1)],1),t._v(" "),n("el-drawer",{attrs:{title:"设置",visible:t.showDrawer,direction:"ltr",size:"60%","show-close":!1},on:{"update:visible":function(e){t.showDrawer=e}}},[n("el-form",{ref:"form",staticClass:"form",attrs:{"label-width":"40px"},model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}},[n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{clearable:!0},model:{value:t.settings.msg,callback:function(e){t.$set(t.settings,"msg",e)},expression:"settings.msg"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"请求方式"}},[n("el-switch",{model:{value:t.settings.isHttps,callback:function(e){t.$set(t.settings,"isHttps",e)},expression:"settings.isHttps"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.Save}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var c=n("C7Lr")(l,u,!1,function(t){n("iNGc")},null,null).exports,d=n("p7sN"),h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]};n("C7Lr")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},h,!1,function(t){n("R18s")},"data-v-5346194b",null).exports;var p={name:"NewsItem",data:function(){return{url:""}},created:function(){this.$emit("change-page","news-item"),this.url=this.$route.query.url},mounted:function(){var t=this.$refs.view,e=(t.contentDocument||t.document,window.outerHeight-45);t.height=e}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item"},[e("iframe",{ref:"view",staticClass:"view",attrs:{src:this.url}})])},staticRenderFns:[]};var g=n("C7Lr")(p,f,!1,function(t){n("hHx5")},null,null).exports,w={name:"NewsList",data:function(){return{msg:"实时热点",newsList:[],srcList:[],wrapperHeight:0,isShowWarn:!0}},methods:{refresh:function(){var t=this;this.$ajax.get("GetNewsList").then(function(e){t.srcList=[],e.data.forEach(function(e){e.image?t.srcList.push(e.image):e.image=""}),t.newsList=e.data}).catch(function(e){console.log(e),~t.$ajax.defaults.baseURL.indexOf("https")&&(t.isShowWarn=!0)}).finally(function(){t.$refs.verticalpull.onDownFunc()})},pulldown:function(){this.refresh()},show:function(){}},created:function(){},mounted:function(){this.refresh()}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vertical-pull",{ref:"verticalpull",attrs:{"down-func":t.pulldown}},[t.isShowWarn?n("el-alert",{attrs:{title:"https请求失败！",type:"warning","show-icon":""}},[t._v("\n  请尝试在新标签中信任请求的"),n("a",{attrs:{href:this.$ajax.defaults.baseURL,target:"_blank"}},[t._v("目标地址")]),t._v(".\n")]):t._e(),t._v(" "),n("ul",t._l(t.newsList,function(e,s){return n("li",{key:s},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:6}},[n("div",{staticClass:"pic"},[n("el-image",{staticClass:"image",attrs:{src:e.image,fit:"scale-down","preview-src-list":t.srcList}},[n("div",{attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])])],1)]),t._v(" "),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"introduction"},[e.link?n("router-link",{staticClass:"item-title",attrs:{to:{path:"/NewsItem",query:{url:e.link}}}},[t._v(t._s(e.keyword)+">>")]):n("router-link",{staticClass:"item-title",attrs:{to:{path:"/NewsItem",query:{url:"https://www.baidu.com/s?wd="+e.keyword}}}},[t._v(t._s(e.keyword)+" "),n("i",{staticClass:"el-icon-search"})]),t._v(" "),n("p",{staticClass:"description"},[t._v(t._s(e.title))])],1)])],1),t._v(" "),n("el-divider")],1)}),0)],1)},staticRenderFns:[]};var m=n("C7Lr")(w,v,!1,function(t){n("px7k")},"data-v-6ff82389",null).exports;s.default.use(d.a);var x=new d.a({routes:[{path:"/",name:"NewsList",component:m,meta:{keepAlive:!0}},{path:"/NewsItem",name:"NewsItem",component:g}]}),_=n("x7Ey"),S=n.n(_);s.default.use(i.Loading.directive),s.default.prototype.$loading=i.Loading.service;var y={name:"vertical-pull",props:{downPullText:{type:String,default:"下拉刷新"},downDropText:{type:String,default:"释放刷新"},downLoadingText:{type:String,default:"加载中..."},downFunc:{type:Function},upPullText:{type:String,default:"上拉加载"},upDropText:{type:String,default:"释放加载"},upLoadingText:{type:String,default:"加载中..."},upFunc:{type:Function},distance:{type:Number,default:70}},data:function(){return{loading:!0,translate:0,downText:"",downDropped:!1,upText:"",upDropped:!1,direction:"",startY:0,startScrollTop:0,currentY:0,downStatus:"",upStatus:""}},computed:{transform:function(){return 0===this.translate?null:"translate3d(0, "+this.translate+"px, 0)"}},watch:{downStatus:function(t){switch(t){case"drop":this.downText=this.downDropText;break;case"loading":this.downText=this.downLoadingText;break;default:this.downText=this.downPullText}}},methods:{onDownFunc:function(){var t=this;this.translate=0,setTimeout(function(){t.downStatus="pull"},200)},init:function(){this.downText=this.downPullText,"function"==typeof this.downFunc&&this.bindTouchEvents()},bindTouchEvents:function(){this.$el.addEventListener("touchstart",this.handleTouchStart),this.$el.addEventListener("touchmove",this.handleTouchMove),this.$el.addEventListener("touchend",this.handleTouchEnd)},handleTouchStart:function(t){this.startY=t.touches[0].clientY,"loading"!==this.downStatus&&(this.downStatus="pull",this.downDropped=!1),"loading"!==this.upStatus&&(this.upStatus="pull",this.upDropped=!1)},handleTouchMove:function(t){if(!((document.documentElement.scrollTop||document.body.scrollTop)>0||this.startY<this.$el.getBoundingClientRect().top&&this.startY>this.$el.getBoundingClientRect().bottom)){this.currentY=t.touches[0].clientY;var e=(this.currentY-this.startY)/2;this.direction=e>0?"down":"up","function"==typeof this.downFunc&&"down"===this.direction&&"loading"!==this.downStatus&&(t.preventDefault(),t.stopPropagation(),this.translate=e,this.downStatus=this.translate>80?"drop":"pull")}},handleTouchEnd:function(t){"down"===this.direction&&this.translate>0&&(this.downDropped=!0,"drop"===this.downStatus?(this.translate="50",this.downStatus="loading",this.downFunc()):(this.translate="0",this.downStatus="pull"))}},mounted:function(){this.init()}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content",style:{transform:t.transform}},[t.downFunc?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"down-pull",attrs:{"element-loading-text":t.downText||t.upText,"element-loading-spinner":"el-icon-loading"}}):t._e(),t._v(" "),t._t("default"),t._v(" "),t.upFunc?n("div",{staticClass:"up-pull"}):t._e()],2)},staticRenderFns:[]};var $=n("C7Lr")(y,T,!1,function(t){n("a9M9")},null,null).exports,L=function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.installed||e.component($.name,$)};"undefined"!=typeof window&&window.Vue&&L(window.Vue);var k={install:L,version:"1.0.0",VerticalPull:$},C=n("YeVJ"),b=n.n(C);s.default.directive("resize",{bind:function(t,e){var n=e.value,s=void 0===n?{}:n;t.addEventListener("load",function(){b()(s,t)})}}),s.default.use(i.Loading.directive),s.default.prototype.$loading=i.Loading.service,s.default.config.productionTip=!1,s.default.use(a.a),s.default.prototype.$ajax=S.a.create({baseURL:"https://47.111.85.187:8011/",timeout:6e3}),s.default.use(k),new s.default({el:"#app",router:x,components:{App:c},template:"<App/>"})},R18s:function(t,e){},a9M9:function(t,e){},hHx5:function(t,e){},iNGc:function(t,e){},px7k:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e6d919e0feacd4ef1054.js.map